containers:
  default:
    docker: node:12.16.1-stretch

steps:
- label: Tests
  timeout: 5m
  git:
    history: shallow
  cache:
  - "$HOME/.npm"
  run:
  - npm ci
  - cd examples/guest-serialization && npm ci && cd -
  - npm test

- label: Formatting
  timeout: 5m
  cache:
  - "$HOME/.npm"
  run:
  - npm ci
  - npm run fmt:check
