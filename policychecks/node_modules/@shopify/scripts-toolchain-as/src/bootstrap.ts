import * as fs from 'fs-extra';

const DEPS_PREFIX = './node_modules/@shopify/';

export function bootstrap(argv: any): void {
  const template = templateBase(argv.from, argv.domain);
  if (!fs.existsSync(template)) {
    console.error(`The given extension point ${argv.from} does not exist`);
    return process.exit(1);
  }

  fs.copySync(template, argv.dest);
  console.log('Bootstrap successful.');
}

function templateBase(name: string, domain?: string) {
  if (domain) {
    return `${DEPS_PREFIX}scripts-${domain}-apis/samples/${name}`;
  }
  return `${DEPS_PREFIX}extension-point-as-${name}/assembly/sample`;
}
