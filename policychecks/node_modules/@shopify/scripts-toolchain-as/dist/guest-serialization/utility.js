"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseTransient = exports.parseAlias = exports.toSnakeCase = exports.getIndentSpaces = void 0;
const assert_1 = require("assert");
const assemblyscript_1 = require("assemblyscript");
function getIndentSpaces(indent) {
    if (indent <= 0) {
        return '';
    }
    else {
        let s = '';
        for (let i = 0; i < indent; i++) {
            s += '  ';
        }
        return s;
    }
}
exports.getIndentSpaces = getIndentSpaces;
function toSnakeCase(str) {
    return str.replace(/[A-Z]/g, (letter) => `_${letter.toLowerCase()}`);
}
exports.toSnakeCase = toSnakeCase;
// Parse '@shopify_rename' annotation
//
// Eg. return 'foo' for
//
// class A {
//   @shopify_rename("foo")
//   bar: string
// }
function parseAlias(field) {
    if (field.decoratorNodes == null) {
        return null;
    }
    const decorators = field.decoratorNodes.find((decorator) => {
        return (decorator.name.kind == assemblyscript_1.NodeKind.IDENTIFIER && decorator.name.text == 'shopify_rename');
    });
    if (decorators == null) {
        return null;
    }
    const args = decorators.args;
    assert_1.strict(args && args.length == 1, 'shopify_rename has arity of 1');
    assert_1.strict(args[0].isLiteralKind(assemblyscript_1.LiteralKind.STRING), 'shopify_rename expects string literal');
    const alias = args[0].value;
    return alias;
}
exports.parseAlias = parseAlias;
// Parse `@shopify_transient` annotation
//
// Eg. return 'true' for bar field
//
// class A {
//   @shopify_transient
//   bar: string;
// }
function parseTransient(field) {
    if (field.decoratorNodes == null) {
        return false;
    }
    const decorators = field.decoratorNodes.find((decorator) => {
        return (decorator.name.kind == assemblyscript_1.NodeKind.IDENTIFIER && decorator.name.text == 'shopify_transient');
    });
    if (decorators == null) {
        return false;
    }
    const args = decorators.args;
    assert_1.strict(args == null || args.length == 0, 'shopify_transient has arity of 0');
    return true;
}
exports.parseTransient = parseTransient;
//# sourceMappingURL=utility.js.map