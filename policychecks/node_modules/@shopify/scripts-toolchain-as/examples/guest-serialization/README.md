This is an AS project to showcase and test guest serialization for scripts-toolchain-as. For all
technical details, check wiki [Guest Serialization - Codegen for
MessagePack](https://github.com/Shopify/scripts-toolchain-as/wiki/Guest-Serialization---Codegen-for-MessagePack).

### Introduction

```
ep1/                   # Each ep folder represents a demo EP
  interface.ts         # required - defines EPName, EPInterface and EP register
  serializer.template  # required - template required for codegen
  serializer.ts        # codegen result, that contains MessagePack serializers for required EP types
ep2/
  *.ts
src/                   # contains a sample user script
  script.ts            # user script that makes use of EP register and various EP types
  shopify_main.ts      # entrypoint to be compiled to wasm
```

### Usage

If you've made some local changes to scripts-toolchain-as, remember to rebuild it by

```sh
cd ../../ && npm run build
```

**Codegen**

```sh
npm run codegen -- ep1
npm run codegen -- ep2
```

**Build**

```sh
npm run build
```

**Execute**

```sh
npm run deploy-and-run -- ep1
npm run deploy-and-run -- ep2
```

This command requires a local runtime-engine instance, `dev clone runtime-engine && cargo build`. Rerun by

```sh
RUNTIME_ENGINE={PATH_TO_YOUR_LOCAL_ENGINE} npm run deploy-and-run -- ep1
```
