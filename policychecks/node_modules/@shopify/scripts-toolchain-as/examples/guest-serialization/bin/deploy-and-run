#!/bin/sh

set -e

if [ -z $1 ]; then
  echo "ep directory required."
  exit 1
fi

if [ ! -d $1 ]; then
  echo "ep directory doesn't exists."
  exit 1
fi

EP=$1
RUNTIME_ENGINE=${RUNTIME_ENGINE:-../../../runtime-engine/}

if touch $RUNTIME_ENGINE ; then
  $RUNTIME_ENGINE/target/debug/runtime-engine-cli --timeout=10000 --wasm=build/build.wasm --payload=input.$EP.json
else
  echo "‼️  Runtime engine build was not found at $RUNTIME_ENGINE. To run scripts from within this repo, first 'dev clone runtime-engine && dev up && cargo build' and then update 'RUNTIME_ENGINE'"
fi
