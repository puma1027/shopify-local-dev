#!/bin/sh
set -e

if [ -z $1 ]; then
  echo "ep directory required."
  exit 1
fi

if [ ! -d $1 ]; then
  echo "ep directory doesn't exists."
  exit 1
fi

cp $1/serializer.template $1/serializer.ts

npx --no-install shopify-scripts-toolchain-as codegen \
  --interface-definition=$1/interface.ts \
  -- --lib=./node_modules --optimize --use Date=
