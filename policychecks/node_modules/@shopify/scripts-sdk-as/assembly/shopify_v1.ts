@external('input_len')
export declare function inputLen(lenPtr: usize): u16;

@external('input_copy')
export declare function inputCopy(ptr: ArrayBuffer): u16;

@external('output_copy')
export declare function outputCopy(ptr: ArrayBuffer, len: usize): u16;

export function safeInputLen(lenPtr: usize): void {
  const status = inputLen(lenPtr);

  if (status !== 0) {
    throw new Error("Fail to run hostcall 'inputLen' with error code: " + status.toString());
  }
}

export function safeInputCopy(ptr: ArrayBuffer): void {
  const status = inputCopy(ptr);

  if (status !== 0) {
    throw new Error("Fail to run hostcall 'inputCopy' with error code: " + status.toString());
  }
}

export function safeOutputCopy(ptr: ArrayBuffer, len: usize): void {
  const status = outputCopy(ptr, len);

  if (status !== 0) {
    throw new Error("Fail to run hostcall 'outputCopy' with error code: " + status.toString());
  }
}
