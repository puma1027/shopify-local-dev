import {safeParseInt} from '../assembly/globals';

describe('safeParseInt', () => {
  throws('throws when isNan', () => {
    safeParseInt('NaN');
  });

  throws('throws when !isSafeInteger', () => {
    safeParseInt('3432342.1234');
  });

  it('parses integers', () => {
    expect(safeParseInt('0')).toBe(0);
    expect(safeParseInt('1')).toBe(1);
    expect(safeParseInt('871')).toBe(871);
    expect(safeParseInt('-42')).toBe(-42);
  });

  it('converts to base 2', () => {
    expect<u64>(2).toBe(safeParseInt('10', 2));
    expect<u64>(3).toBe(safeParseInt('11', 2));
  });

  it('converts to base 10', () => {
    expect<u64>(10).toBe(safeParseInt('10', 10));
    expect<u64>(11).toBe(safeParseInt('11', 10));
  });
});
